(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{4322:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>d});var t=l(5155),a=l(2115),r=l(5695),o=l(6874),c=l.n(o);let n=e=>{let{food:s}=e,{food_name:l,food_description:a,food_url:r,food_id:o}=s;return(0,t.jsx)("div",{className:"flex items-center bg-white p-4 rounded shadow mb-4",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-black font-semibold",children:l}),(0,t.jsxs)("ul",{children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("br",{}),(0,t.jsxs)("p",{className:"text-black",children:["Description: ",a]})]}),(0,t.jsx)("li",{children:(0,t.jsx)(c(),{href:r,className:"text-black underline",children:r})})]})]})})},i=e=>{let{results:s}=e;return s&&0!==s.length?(0,t.jsx)("div",{className:"mt-6 w-full max-w-lg mx-auto bg-white p-4 rounded shadow",children:(0,t.jsx)("ul",{className:"text-red list-disc pl-5 space-y-1",children:s.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)(n,{food:e})},e.food_id))})}):(0,t.jsx)("p",{children:"No results found! Go back and search another food."})};function d(){let e=(0,r.useSearchParams)().get("searchTerm")||"",[s,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)([]);return(0,a.useEffect)(()=>{e&&(async()=>{let s=await fetch("/api/food?searchTerm=".concat(e));if(console.log("Fetch ResultsPage status:",s.status),!s.ok){console.log("Fetch failed; try again: ",s.status),l(!0);return}let t=await s.json();console.log("Fetched ResultsPage data:",t);let a=function(e){let s=e.map(e=>{let s=parseInt(e.food_description.split("Calories: ")[1].split("kcal")[0]);return{food:e,cal:s}});return s.sort((e,s)=>e.cal-s.cal),s.slice(0,3).map(e=>e.food)}(null==t?void 0:t.foods.food);console.log("Here are your low-calorie foods:",a),c(a)})()},[e]),(0,t.jsxs)("main",{className:"p-8",children:[(0,t.jsxs)("h1",{className:"text-xl font-bold mb-4",children:["Search Results for ",(0,t.jsx)("strong",{children:e})]}),s?(0,t.jsx)("p",{children:"Something went wrong while fetching results. Please try again."}):(0,t.jsx)(i,{results:o})]})}},6560:(e,s,l)=>{Promise.resolve().then(l.bind(l,4322))}},e=>{var s=s=>e(e.s=s);e.O(0,[244,441,684,358],()=>s(6560)),_N_E=e.O()}]);